<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNSL API Guide and Reference Manual: examples/xgs/example_policer.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css" />
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNSL API Guide and Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="pages.html"><span>OpenNSL&#160;Documentation</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_0a79fbcd3b9b61e45c34012618895dc0.html">xgs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">example_policer.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="xgs_2example__policer_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*********************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * (C) Copyright Broadcom Corporation 2013-2017</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *  You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *  Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *  See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *  limitations under the License.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> **********************************************************************</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * \file         example_policer.c</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief        OpenNSL example application for policer or service meter</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \details       In this example, we will create a simple two rate, three color policer. </span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *                This policer will be attached to a Field Processor rule that counts </span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *                packets ingressing on a selected port with a specific VLAN Id. </span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *                Packets that exceed peak rate will be colored red.  A field processor </span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *                stat counter will be attached that counts &quot;red&quot; and &quot;not red&quot; bytes.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> **********************************************************************/</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="opennsl_2error_8h.html">opennsl/error.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="opennsl_2port_8h.html">opennsl/port.h</a>&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="vlan_8h.html">opennsl/vlan.h</a>&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="field_8h.html">opennsl/field.h</a>&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="policer_8h.html">opennsl/policer.h</a>&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="examples_2util_8h.html">examples/util.h</a>&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="code" href="xgs_2example__policer_8c.html#adbb76aecfc5eef000cb4cb55bc2fd404">   40</a></span>&#160;<span class="preprocessor">#define DEFAULT_UNIT 0</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="code" href="xgs_2example__policer_8c.html#a91668ed1245d073a2ac84e6121205d28">   41</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_VLAN 1</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="code" href="xgs_2example__policer_8c.html#a0b1e59ebe305a08745173e74b2914ac2">   45</a></span>&#160;<a class="code" href="xgs_2example__policer_8c.html#a0b1e59ebe305a08745173e74b2914ac2">example_create_policer</a>(<span class="keywordtype">int</span> unit, <a class="code" href="group__field.html#ga4387a1b4682c605fcc1a2b8297f8a404" title="Opaque handle to a field group.">opennsl_field_group_t</a> * group, <a class="code" href="group__types.html#gacaeba2b4ddbc89b0e556720a9388885f" title="Set the default tag protocol ID (TPID) for the specified port.">opennsl_port_t</a> <a class="code" href="opennsl__api_8dox.html#abd1fe5382f13606db566da3450b351b0">port</a>, <a class="code" href="group__types.html#gaff94709d1708a51eb9aadb2e9fa03875" title="opennsl_vlan_t">opennsl_vlan_t</a> vlan,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                       <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> *statId)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="group__types.html#ga265033c7aaf6d915b6aa85b49e6ecaf1" title="opennsl_field_stat_e">opennsl_field_stat_t</a> <a class="code" href="example__field__redirect_8c.html#ab30be53fb3407849f0fac2f490911c1f">stats</a>[2] = {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="group__types.html#gga4e242bb4676be2d7083bd25738f65aafac152fc53f01d5d3ef9ec9ed7117e352e" title="Byte count of red traffic.">opennslFieldStatRedBytes</a>, <a class="code" href="group__types.html#gga4e242bb4676be2d7083bd25738f65aafaf7fdaddae89e064df8a26ad79eace4aa" title="Byte count of not red traffic.">opennslFieldStatNotRedBytes</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    };</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">     * Choose rates that don&#39;t overlap to simplify validation.  Make bit</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">     * rates even muliples of 8</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">     * */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   base_rate = (index + 1) * 50;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   cir = base_rate * 8;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   cbs = (base_rate + 200) * 8;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   pir = (base_rate + 400) * 8;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   pbs = (base_rate + 600) * 8;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="group__types.html#gac91c9cde19d67513d4d7a5693f0d1fa4" title="opennsl_policer_t">opennsl_policer_t</a> <a class="code" href="dpp_2example__policer_8c.html#ae1f8e7ccbc1a30485b63b662315eb49c">policer_id</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="group__field.html#ga699caff1a232fe42e6668e5d2869e61e" title="Opaque handle to a field entry.">opennsl_field_entry_t</a> entry;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="structopennsl__policer__config__s.html">opennsl_policer_config_t</a> policer_config;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (*group &lt; 0) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="comment">/* Only create group once, all entries share the same group */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="structopennsl__field__qset__s.html" title="Field qset defines the set of fields used for lookup.">opennsl_field_qset_t</a> qset;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="comment">/* Create QSET. */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="group__field.html#ga37e97efc912030850263af8ef6248443">OPENNSL_FIELD_QSET_INIT</a>(qset);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">/* Specifiy Ingress Field Processor */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="group__field.html#gae7dc7300f0a4b3add5d9099b52eaf735">OPENNSL_FIELD_QSET_ADD</a>(qset, <a class="code" href="group__field.html#ggaa519dd558cda3869447bd6e1209b8ce4a49de8bd682117312bfb61e3e63369847" title="Field Processor pipeline ingress stage.">opennslFieldQualifyStageIngress</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">/* Match on outer VLAN ID and Ingress Port */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="group__field.html#gae7dc7300f0a4b3add5d9099b52eaf735">OPENNSL_FIELD_QSET_ADD</a>(qset, <a class="code" href="group__field.html#ggaa519dd558cda3869447bd6e1209b8ce4a1153c398cdfe1272094470cad2e7d8ff" title="Outer VLAN Id.">opennslFieldQualifyOuterVlanId</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="group__field.html#gae7dc7300f0a4b3add5d9099b52eaf735">OPENNSL_FIELD_QSET_ADD</a>(qset, <a class="code" href="group__field.html#ggaa519dd558cda3869447bd6e1209b8ce4a29ca6721093c1a745c509af76211a973" title="Single Input Port.">opennslFieldQualifyInPort</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gac08a5398598caf186f4e084493431245" title="Create a field group.">opennsl_field_group_create</a></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                            (unit, qset, <a class="code" href="group__field.html#ga650a60a6b7159e9aaa653f7e0f17c07a">OPENNSL_FIELD_GROUP_PRIO_ANY</a>, group));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">/* Create a field processor entry */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gac6491132b08dde21c8a22ef703744d8e" title="Create a blank field entry.">opennsl_field_entry_create</a>(unit, *group, &amp;entry));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">/* Match on Ingress port and VLAN ID */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gaca3713492d04ba13a63f373ba7e402a9">opennsl_field_qualify_InPort</a>(unit, entry, port, 0xFF));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#ga45af7e7b738d4b2215b3fac7098175f5">opennsl_field_qualify_OuterVlanId</a>(unit, entry, vlan, 0xFFF));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">/* Fill out policer configuration */</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="group__policer.html#ga91761860f3bc8d45c400f0df15c5ebb8" title="Initialize a policer configuration structure.">opennsl_policer_config_t_init</a>(&amp;policer_config);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    policer_config.<a class="code" href="structopennsl__policer__config__s.html#ad68ece54793c13998c4fbc57da4c9f1d" title="Policer mode.">mode</a> = <a class="code" href="group__policer.html#gga4f914affbe1d6b845ee39c41ef2decd0afbbead3c313396de8c33b9174289966c" title="RFC 2698.">opennslPolicerModeTrTcm</a>;  <span class="comment">/* Two rate, three color policer */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    policer_config.<a class="code" href="structopennsl__policer__config__s.html#ad0d2de6c96152e2b0e39cbcdc68be309" title="OPENNSL_POLICER_* Flags.">flags</a> |= <a class="code" href="group__policer.html#gac31e391cb2ba0da2c59d34363c7e2537">OPENNSL_POLICER_COLOR_BLIND</a>;    <span class="comment">/* Ignore previous color */</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    policer_config.<a class="code" href="structopennsl__policer__config__s.html#a0234c298242cb9c97edf38839cee39e2" title="Committed rate (kbits per sec).">ckbits_sec</a> = cir;    <span class="comment">/* Committed Rate, below this rate, packets are green */</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    policer_config.<a class="code" href="structopennsl__policer__config__s.html#a6192654a85f674180fa00e496f21cbb2" title="Committed burst size (kbits).">ckbits_burst</a> = cbs;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    policer_config.<a class="code" href="structopennsl__policer__config__s.html#a80e682a7afedf1b826cc59c632576264" title="Peak rate (kbits per sec).">pkbits_sec</a> = pir;    <span class="comment">/* Peak Rate, below rate is yellow, above rate is red */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    policer_config.<a class="code" href="structopennsl__policer__config__s.html#a45403bdbdaa193dfb2d2d872dcb65b33" title="Peak burst size (kbits).">pkbits_burst</a> = pbs;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">/* Create the policer */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__policer.html#gac1d0dc00c9ebbf0a1b263ded965e9915" title="Create a policer entry.">opennsl_policer_create</a>(unit, &amp;policer_config, &amp;policer_id));</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">/* Attach policer to the entry */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gad260788b3efb1eae8ff7f5e434767e87" title="Attach a policer to a field entry.">opennsl_field_entry_policer_attach</a>(unit, entry, 0, policer_id));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">/* Add an FP rule to drop all red packets */</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gab08abe643c27e9880d28748202969035" title="Add an action to a field entry.">opennsl_field_action_add</a>(unit, entry, <a class="code" href="group__field.html#gga7e4b15dc0ad1411548bfbaff998cb97fa9ab45b53a8bc5eb6272ba91f56918ada" title="Red Priority Drop.">opennslFieldActionRpDrop</a>, 0, 0));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">/* Create a statistics entry to keep track of red/not-red traffic */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gadc2ef828fbcc2da29f478a7b5990ddf2" title="Create stat collection entity.">opennsl_field_stat_create</a>(unit, *group, 2, stats, statId));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gad262135567b2fd47ceb1af7b4ca5c620" title="Attach statistics entity to Field Processor entry.">opennsl_field_entry_stat_attach</a>(unit, entry, *statId));</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">/* Finally install the field entry */</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#ga32de64a448e1706862ad27111610c718" title="Install a field entry into the hardware tables.">opennsl_field_entry_install</a>(unit, entry));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    printf</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      (<span class="stringliteral">&quot;  Policer %2d, Stat: %2d; CIR: %5d[%4d]; CBS: %5d[%4d]; PIR: %5d[%4d]; PBS: %5d[%4d]\n&quot;</span>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;       policer_id, *statId, cir, cir / 8, cbs, cbs / 8, pir, pir / 8, pbs, pbs / 8);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/* Check Policer Rates</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> * This function attempts to compute actual data rates from policers defined</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * above. The assumption is that all ports are oversubscribed and that all</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * policer peak rates will be exceeded resulting in traffic shaping. The</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * computed rates are checked against expected rates. If the overall error</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * exceeds a empirically determined limit, an error status is returned.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="code" href="xgs_2example__policer_8c.html#a17f27a5105da0bf18a416f4bd047cdd1">  130</a></span>&#160;<a class="code" href="xgs_2example__policer_8c.html#a17f27a5105da0bf18a416f4bd047cdd1">example_check_rates</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> *stat_list, <span class="keywordtype">int</span> stat_count)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   max_error = 50; <span class="comment">/* 1/2 of 1% */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   loop_count = 15;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">int</span>         loop;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">int</span>         accumulated_error = 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">for</span> (loop = 0; loop &lt; loop_count; loop++) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">int</span>         idx;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>   delay = 2;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="sal_2types_8h.html#aa3ad64cf41ec3a042bd92550cc6ed308">uint64</a>      stat_value;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        sleep(delay);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        printf(<span class="stringliteral">&quot;\nLoop: %d\n&quot;</span>, loop);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; idx++) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#gaf85528d51ba145198ff9be30d597814a" title="Get 64-bit counter value for specific statistic type.">opennsl_field_stat_get</a></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                (unit, stat_list[idx], <a class="code" href="group__types.html#gga4e242bb4676be2d7083bd25738f65aafaf7fdaddae89e064df8a26ad79eace4aa" title="Byte count of not red traffic.">opennslFieldStatNotRedBytes</a>,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                 &amp;stat_value));</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__field.html#ga6ada52ae06e1129c76b525e8ba934faf" title="Set 64-bit counter value for specific statistic type.">opennsl_field_stat_set</a></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                (unit, stat_list[idx], <a class="code" href="group__types.html#gga4e242bb4676be2d7083bd25738f65aafaf7fdaddae89e064df8a26ad79eace4aa" title="Byte count of not red traffic.">opennslFieldStatNotRedBytes</a>, 0));</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">/* First time around seems to always be off */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">if</span> (loop &gt; 0) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keyword">const</span> <a class="code" href="sal_2types_8h.html#a2777f33e5e41fad928028a58e3c0a8d8">int64</a>   expected_rate = (((idx + 1) * 50) + 400) * 1000;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                <span class="keyword">const</span> <a class="code" href="sal_2types_8h.html#a2777f33e5e41fad928028a58e3c0a8d8">int64</a>   rate = stat_value / delay;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="comment">/* LSB= 0.01% */</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <a class="code" href="sal_2types_8h.html#a2777f33e5e41fad928028a58e3c0a8d8">int64</a>         rate_error =</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                  ((rate - expected_rate) * 10000) / expected_rate;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                printf(<span class="stringliteral">&quot;Rate: %d = %8llu bytes/sec [expected=%8llu, error=%lld]\n&quot;</span>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                           stat_list[idx], rate, expected_rate, rate_error);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                accumulated_error += (rate_error &lt; 0) ? -rate_error : rate_error;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    accumulated_error /= (stat_count * (loop_count - 1));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (accumulated_error &gt; max_error) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        printf(<span class="stringliteral">&quot;FAIL: Per port avg error %d exceeds max of %d [LSB = 0.01%%]\n&quot;</span>,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                   accumulated_error, max_error);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5acc22c36dedd5356dfbbf50d38397cca5">OPENNSL_E_FAIL</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    printf(<span class="stringliteral">&quot;PASS: Per port avg error: +/- %d [LSB = 0.01%%]\n&quot;</span>, accumulated_error);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/* Transmit a single test packet on the specified port */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keyword">static</span> <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;example_tx_pkt(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> <a class="code" href="opennsl__api_8dox.html#abd1fe5382f13606db566da3450b351b0">port</a>)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       mypkt[] = {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">  00    01    02    03    04    05    06    07    08    09    10    11    12    13    14    15*/</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;0x01, 0x00, 0x5E, 0x00, 0x00, 0x01, 0x80, 0x80, 0x80, 0x71, 0x35, 0x42, 0x81, 0x00, 0x00, 0x01,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;0x08, 0x00, 0x45, 0x00, 0x00, 0x5A, 0x00, 0x01, 0x00, 0x00, 0x40, 0x11, 0xD7, 0xE6, 0xC0, 0xA8,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;0x01, 0x01, 0xE0, 0x01, 0x01, 0x01, 0x00, 0x07, 0x00, 0x07, 0x00, 0x46, 0x2C, 0xF6, 0x41, 0x6C,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;0x6C, 0x20, 0x47, 0x6F, 0x6F, 0x64, 0x20, 0x54, 0x68, 0x69, 0x6E, 0x67, 0x73, 0x20, 0x43, 0x6F,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;0x6D, 0x65, 0x20, 0x54, 0x6F, 0x20, 0x54, 0x68, 0x6F, 0x73, 0x65, 0x20, 0x57, 0x68, 0x6F, 0x20,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;0x57, 0x61, 0x6E, 0x74, 0x20, 0x4C, 0x6F, 0x74, 0x73, 0x20, 0x4F, 0x66, 0x20, 0x47, 0x6F, 0x6F,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;0x64, 0x20, 0x54, 0x68, 0x69, 0x6E, 0x67, 0x73, 0x00, 0x00, 0x00, 0x00</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    };</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   mypkt_SIZEOF = <span class="keyword">sizeof</span>(mypkt);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="structopennsl__pkt__s.html" title="Initialize a OPENNSL packet structure.">opennsl_pkt_t</a>  *pkt;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__pkt.html#ga47a42ca3b1affa6979707e70007122ea" title="Allocate or deallocate a packet structure and packet data.">opennsl_pkt_alloc</a>(unit, mypkt_SIZEOF, 0, &amp;pkt));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="group__pkt.html#ga9acefb6d4b56d5988e9f43fc20375c98" title="Copy data into the data blocks of a packet structure.">opennsl_pkt_memcpy</a>(pkt, 0, mypkt, mypkt_SIZEOF);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    pkt-&gt;<a class="code" href="structopennsl__pkt__s.html#a677cfa60b3e1be38bd8c32c2ba1011de" title="Pointer to array of data blocks.">pkt_data</a>-&gt;<a class="code" href="structopennsl__pkt__blk__s.html#a8bceb369dcb292d14e89abbe00498215">len</a> = mypkt_SIZEOF;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    pkt-&gt;<a class="code" href="structopennsl__pkt__s.html#a601064f20f8473a03dd86240cfe6a6b4" title="OPENNSL_PKT_F_xxx flags.">flags</a> = <a class="code" href="group__pkt.html#ga13adb16515eacbaed2854ef69b3333c8" title="Regenerate CRC.">OPENNSL_TX_CRC_REGEN</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="group__types.html#ga30669bfc9d489739887018a57be1583c">OPENNSL_PBMP_PORT_SET</a>(pkt-&gt;<a class="code" href="structopennsl__pkt__s.html#a8b6b570196647c6e2c6ab5ad401c96db" title="Target ports.">tx_pbmp</a>, port);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">/* Transmit packet */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__pkt.html#ga967e993e7903a64d2a170f23b8f6c7ba" title="Transmit one or more packets.">opennsl_tx</a>(unit, pkt, <a class="code" href="sal_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__pkt.html#gaad1aa79d4ef9907edc9ab6b30f6a0b0f" title="Allocate or deallocate a packet structure and packet data.">opennsl_pkt_free</a>(unit, pkt));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/* Create VLAN (if necessary) and add a port to it.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> * Strip VLAN tags on egressing traffic.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="keyword">static</span> <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;example_add_port_to_vlan(<span class="keywordtype">int</span> unit, <a class="code" href="group__types.html#gaff94709d1708a51eb9aadb2e9fa03875" title="opennsl_vlan_t">opennsl_vlan_t</a> vlan, <a class="code" href="group__types.html#gacaeba2b4ddbc89b0e556720a9388885f" title="Set the default tag protocol ID (TPID) for the specified port.">opennsl_port_t</a> port)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="struct__shr__pbmp.html">opennsl_pbmp_t</a>  untagged;;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="struct__shr__pbmp.html">opennsl_pbmp_t</a>  port_mask;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__error.html#ga655eb72518850235a4c759ddceb622e6">OPENNSL_FAILURE</a>(rv = <a class="code" href="group__vlan.html#ga4db9e633ba9c276064768d1718c3062c" title="Allocate and configure a VLAN on the OPENNSL device.">opennsl_vlan_create</a>(unit, vlan)) &amp;&amp; (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5ad03e135eecd46c9c1280e7b3f6ab5b6a">OPENNSL_E_EXISTS</a>)) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        printf(<span class="stringliteral">&quot;Failed to create VLAN %d\n&quot;</span>, vlan);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="group__types.html#ga30669bfc9d489739887018a57be1583c">OPENNSL_PBMP_PORT_SET</a>(port_mask, port);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="group__types.html#ga30669bfc9d489739887018a57be1583c">OPENNSL_PBMP_PORT_SET</a>(untagged, port);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__vlan.html#ga1e7cecaf6718cd174f1b1aef29349340" title="Add ports to the specified VLAN.">opennsl_vlan_port_add</a>(unit, vlan, port_mask, untagged));</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__port.html#gaa3747d513cfc9205b8ee738cba1910c1" title="Get or set the default VLAN for packets that ingress untagged.">opennsl_port_untagged_vlan_set</a>(unit, port, vlan));</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"> * This function configures two ports to feed back on each other when a packet</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"> * is sent on either one of them. This causes a &quot;packet storm&quot; on these two</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"> * ports resulting in a high rate of traffic on these ports.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> * The traffic from the storm ports is used to generate traffic on other</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"> * ports. These ports will be configued such that ingressing traffic is</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"> * assigned to a unique VLAN. Policers will be created for these other ports</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"> * (called ingress ports).</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="code" href="xgs_2example__policer_8c.html#aee65dafdf707088d43b1664bf7afeb23">  243</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="xgs_2example__policer_8c.html#aee65dafdf707088d43b1664bf7afeb23">example_policer_test</a>(<span class="keywordtype">int</span> unit)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__types.html#gaff94709d1708a51eb9aadb2e9fa03875" title="opennsl_vlan_t">opennsl_vlan_t</a> vlan_base = 100;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   max_ports = 10;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   storm_ports = 2;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="group__field.html#ga4387a1b4682c605fcc1a2b8297f8a404" title="Opaque handle to a field group.">opennsl_field_group_t</a> group = -1;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="structopennsl__port__config__s.html" title="Port Configuration structure.">opennsl_port_config_t</a> portConfig;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="group__types.html#gacaeba2b4ddbc89b0e556720a9388885f" title="Set the default tag protocol ID (TPID) for the specified port.">opennsl_port_t</a>  ingress_list[max_ports];</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="group__types.html#gacaeba2b4ddbc89b0e556720a9388885f" title="Set the default tag protocol ID (TPID) for the specified port.">opennsl_port_t</a>  <a class="code" href="opennsl__api_8dox.html#abd1fe5382f13606db566da3450b351b0">port</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="group__types.html#gacaeba2b4ddbc89b0e556720a9388885f" title="Set the default tag protocol ID (TPID) for the specified port.">opennsl_port_t</a>  port_list[max_ports];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">int</span>         ingress_count;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">int</span>         port_count;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">int</span>         stat_ids[max_ports];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    port_count = 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    ingress_count = 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__port.html#ga9f95e3f27b53970914dccc70ffbe7010" title="Retrieved the port configuration for the specified device.">opennsl_port_config_get</a>(unit, &amp;portConfig));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="group__types.html#ga742e22658005a7f2772423ba8af9077d">OPENNSL_PBMP_ITER</a>(portConfig.<a class="code" href="structopennsl__port__config__s.html#afc418db09422234cc8de20841fa71f86" title="Mask of eth ports.">e</a>, port) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">if</span> (port_count == max_ports) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        port_list[port_count] = <a class="code" href="opennsl__api_8dox.html#abd1fe5382f13606db566da3450b351b0">port</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__port.html#ga7f235353d2db2367145287133a36bf5d" title="Set or retrieve the current loopback mode of a port.">opennsl_port_loopback_set</a>(unit, port, <a class="code" href="group__port.html#gga36f69e191f72602a5bf455b195b0a18ba453094489574b462b0024d39031e17f4">OPENNSL_PORT_LOOPBACK_MAC</a>));</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">if</span> (port_count &gt;= storm_ports) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <a class="code" href="group__types.html#gaff94709d1708a51eb9aadb2e9fa03875" title="opennsl_vlan_t">opennsl_vlan_t</a>  next_vlan = (port_count &gt;&gt; 1) + vlan_base;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">             * Once storm ports are configured, configure test port pairs</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">             * (ingress and egress). Each port in the pair will be assigned</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">             * to a VLAN. Untagged packets on these ports will be assigned</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">             * to the new VLAN. The egress port only belongs to the new</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">             * VLAN. The ingress port belongs to both the new VLAN and the</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">             * default VLAN. This allows it to receive all traffic broadcast</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">             * on the default VLAN from the storm ports. The egress port is</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">             * configured to drop all packets to prevent packet storms on</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">             * these port pairs.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(example_add_port_to_vlan(unit, next_vlan, port));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">if</span> (port_count &amp; 1) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <a class="code" href="struct__shr__pbmp.html">opennsl_pbmp_t</a>  port_mask;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <a class="code" href="group__types.html#ga30669bfc9d489739887018a57be1583c">OPENNSL_PBMP_PORT_SET</a>(port_mask, port);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="comment">/* Remove egress port from default VLAN */</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="group__vlan.html#ga4b7573f64e9926a3d374014c58e84953" title="Remove ports from a specified VLAN.">opennsl_vlan_port_remove</a>(unit, 1, port_mask));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="comment">/* Set policer on ingress port */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                printf(<span class="stringliteral">&quot;Ingress Test Port: %d\n&quot;</span>, port);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="xgs_2example__policer_8c.html#a0b1e59ebe305a08745173e74b2914ac2">example_create_policer</a></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                    (unit, &amp;group, port, next_vlan,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                     ingress_count, &amp;stat_ids[ingress_count]));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                ingress_list[ingress_count] = <a class="code" href="opennsl__api_8dox.html#abd1fe5382f13606db566da3450b351b0">port</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                ingress_count++;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        port_count++;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (port_count != max_ports) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        printf(<span class="stringliteral">&quot;Not enough ethernet ports for test: %d\n&quot;</span>, port_count);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    printf(<span class="stringliteral">&quot;Send packet on storm port %d\n&quot;</span>, port_list[0]);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">/* Create a packet storm to fully subscribe all ports being tested */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(example_tx_pkt(unit, port_list[0]));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="group__error.html#gaa1ed0c76c2846d4d337b3157ff73c823">OPENNSL_IF_ERROR_RETURN</a>(<a class="code" href="xgs_2example__policer_8c.html#a17f27a5105da0bf18a416f4bd047cdd1">example_check_rates</a>(unit, stat_ids, ingress_count));</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">/*****************************************************************/</span></div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="code" href="xgs_2example__policer_8c.html#a0ddf1224851353fc92bfbff6f499fa97">  320</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main function for policer application.">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordtype">int</span> rv = 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordtype">int</span> unit = <a class="code" href="xgs_2example__policer_8c.html#adbb76aecfc5eef000cb4cb55bc2fd404">DEFAULT_UNIT</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">/* Initialize the system. */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  rv = <a class="code" href="driver_8h.html#a06a6fe41f5ea8664c461423d3cad0923" title="Function to initialize the switch.">opennsl_driver_init</a>((<a class="code" href="structopennsl__config__s.html">opennsl_init_t</a> *) <a class="code" href="sal_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">if</span>(rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to initialize the system. Error: %s\r\n&quot;</span>,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;           <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">/* cold boot initialization commands */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  rv = <a class="code" href="examples_2util_8h.html#a2846e8ec8f46d212a3ae2493bdff7980" title="Set default configuration (like STP state, speed/duplex) for all ports.">example_port_default_config</a>(unit);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to apply default config on ports, rc = %d (%s).\r\n&quot;</span>,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;           rv, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">/* Add ports to default vlan. */</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  printf(<span class="stringliteral">&quot;Adding ports to default vlan.\r\n&quot;</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  rv = <a class="code" href="examples_2util_8h.html#a2d14e4de1f4a7192ac7e378f8f7c63ff" title="Add all ports to default vlan.">example_switch_default_vlan_config</a>(unit);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span>(rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to add default ports. Error: %s\r\n&quot;</span>,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">/* Create policer and test traffic rate */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  rv = <a class="code" href="xgs_2example__policer_8c.html#aee65dafdf707088d43b1664bf7afeb23">example_policer_test</a>(unit);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to test policer. Error: %s\r\n&quot;</span>,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }  </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<hr>
<p>	
<table class="footer-brcm">
	<tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align=left></td>
		<td class="footer-brcm"><small><b>&copy;  2016-17 by Broadcom Limited. All rights reserved.</b></small>
			<div class="footer-brcm"><small>Broadcom Limited reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design. 
Information furnished by Broadcom Limited is believed to be accurate and reliable. However, Broadcom Limited does not assume any liability arising 
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license 
under its patent rights nor the rights of others. </small>
			</div>
		</td>
	</tr>
</table>	
</p>	
</div>
<!--END GENERATE_TREEVIEW-->
</body>
</html>
