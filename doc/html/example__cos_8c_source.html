<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNSL API Guide and Reference Manual: examples/dpp/example_cos.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css" />
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNSL API Guide and Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="pages.html"><span>OpenNSL&#160;Documentation</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_3b907af6788adb4a007b7e829369d3f2.html">dpp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">example_cos.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="example__cos_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*********************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * (C) Copyright Broadcom Corporation 2013-2017</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *  You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *  Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *  See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *  limitations under the License.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> **********************************************************************</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * \file         example_cos.c</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief        OpenNSL example application for Class Of Service module</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \details       This example includes:</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *  o     Port shaper </span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *  o     Queue&#39;s weight (WFQ) </span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *  o     Strict priority </span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *  o     Incoming TC/DP mapping </span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * It is assumed diag_init is executed.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * Settings include:</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * Set the OFP Bandwidth to 5G using the port shaper.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *  1.  Set the OFP Bandwidth to 5G using the port shaper. </span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *    2.    Set queues priorities WFQ/SP as follows:</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> *         -    For the high-priority queues, WFQ is set: UC will get 2/3 of the BW and MC will get 1/3 of the BW.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> *         -    For the low-priority queues, SP UC is set over MC.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> *    3.    Configure TC/DP egress mapping. Map low-priority traffic (0 - 3 for UC, 0  - 5 for MC)</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> *     to low-priority queues, and high-priority traffic (4  - 7 for UC, 6  - 7 for MC) to high-priority queues.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> *  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> *  |                                                                        |</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> *  |                                   |\                                   |</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> *  |opennslCosqGportTypeUnicastEgress  | \                                  |</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> *  |             +-----------+         |  \                                 |</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> *  |   TC 0-3 --&gt;| HP UC  || |---------|2/3\                                |</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> *  |             +-----------+         |    |                               |</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> *  |opennslCosqGportTypeMulticastEgress|WFQ |-----+                         |</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> *  |             +-----------+         |    |     |     |\                  |</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> *  |   TC 0-5 --&gt;| HP MC  || |---------|1/3/      |     | \                 |</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *  |             +-----------+         |  /       +----&gt;|H \                |</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *  |                                   | /              |   \               |</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *  |                                   |/               |    |    5G        |</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> *  |                                                    | SP |----SPR----&gt;  |</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> *  |opennslCosqGportTypeUnicastEgress  |\               |    |              |</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> *  |             +-----------+         | \              |   /               |</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> *  |   TC 4-7 --&gt;| LP UC  || |---------|H \       +----&gt;|L /                |</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> *  |             +-----------+         |   |      |     | /                 |</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> *  |opennslCosqGportTypeMulticastEgress| SP|------+     |/                  |</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> *  |             +-----------+         |   |                                |</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> *  |   TC 6-7 --&gt;| LP MC  || |---------|L /          +----------------+     |</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> *  |             +-----------+         | /           |      KEY       |     |</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> *  |                                   |/            +----------------+     |</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *  |                                                 |SPR- Rate Shaper|     |</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *  |                                                 |                |     |</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> *  |                                                 +----------------+     |</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> *  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="opennsl_2error_8h.html">opennsl/error.h</a>&gt;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="init_8h.html">opennsl/init.h</a>&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stack_8h.html">opennsl/stack.h</a>&gt;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="opennsl_2port_8h.html">opennsl/port.h</a>&gt;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="l2_8h.html">opennsl/l2.h</a>&gt;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="vlan_8h.html">opennsl/vlan.h</a>&gt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="cosq_8h.html">opennsl/cosq.h</a>&gt;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="multicast_8h.html">opennsl/multicast.h</a>&gt;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="examples_2util_8h.html">examples/util.h</a>&gt;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="code" href="example__cos_8c.html#afc7d01e6dbea2c820a68fb8081c58a89">   84</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="example__cos_8c.html#afc7d01e6dbea2c820a68fb8081c58a89">example_usage</a>[] =</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="stringliteral">&quot;Syntax: example_cos                                                    \n\r&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral">&quot;                                                                       \n\r&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">&quot;Paramaters: None.                                                      \n\r&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">&quot;                                                                       \n\r&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral">&quot;Example: The following command is used to test the CoS functionality   \n\r&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral">&quot;                                                                       \n\r&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral">&quot;         example_cos                                                   \n\r&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="stringliteral">&quot;                                                                       \n\r&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="stringliteral">&quot;Usage Guidelines: None.                                                \n\r&quot;</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="example__cos_8c.html#adbb76aecfc5eef000cb4cb55bc2fd404">   96</a></span>&#160;<span class="preprocessor">#define DEFAULT_UNIT 0</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a91668ed1245d073a2ac84e6121205d28">   97</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_VLAN 1</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a8b5659941298c6f209a80a5bb61b6bf7">  100</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a8b5659941298c6f209a80a5bb61b6bf7">egress_mc</a> = 0;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="code" href="example__cos_8c.html#ac12d4a53600681e3b6cb5e111c8f1765">  102</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#ac12d4a53600681e3b6cb5e111c8f1765">multicast__open_mc_group</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> *mc_group_id, <span class="keywordtype">int</span> extra_flags) </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">int</span> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordtype">int</span> flags;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">/* destroy before open, to ensure it not exist */</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  rv = <a class="code" href="group__multicast.html#ga27adcadc98215474623759d0d7afb8d2" title="Destroy a multicast group.">opennsl_multicast_destroy</a>(unit, *mc_group_id);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  printf(<span class="stringliteral">&quot;egress_mc: %d \n&quot;</span>, <a class="code" href="example__cos_8c.html#a8b5659941298c6f209a80a5bb61b6bf7">egress_mc</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  flags = <a class="code" href="group__multicast.html#gaf2991b6d0bfbd56d66953868e6c099be">OPENNSL_MULTICAST_WITH_ID</a> | extra_flags;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">/* create ingress/egress MC */</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="example__cos_8c.html#a8b5659941298c6f209a80a5bb61b6bf7">egress_mc</a>) </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    flags |= <a class="code" href="group__multicast.html#ga9d5471deb377bb1324e0b77f04319250">OPENNSL_MULTICAST_EGRESS_GROUP</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  } </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    flags |= <a class="code" href="group__multicast.html#gaae730f6ddddbdef6db10444bc9e5a657">OPENNSL_MULTICAST_INGRESS_GROUP</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  rv = <a class="code" href="group__multicast.html#ga9134d19d090cf0b13f883abc1edf606c" title="Create a multicast group for packet replication.">opennsl_multicast_create</a>(unit, flags, mc_group_id);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    printf(<span class="stringliteral">&quot;Error, opennsl_multicast_create, flags $flags mc_group_id $mc_group_id \n&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  printf(<span class="stringliteral">&quot;Created mc_group %d \n&quot;</span>, *mc_group_id);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/* Adding entries to MC group</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> * ipmc_index:  mc group</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> * ports: array of ports to add to the mc group</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> * cud </span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> * nof_mc_entries: number of entries to add to the mc group</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"> * is_ingress:  if true, add ingress mc entry, otherwise, add egress mc </span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> * see add_ingress_multicast_forwarding from cint_ipmc_flows.c</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a2cfb797cf32205ee36458a10d85ec3a3">  145</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a2cfb797cf32205ee36458a10d85ec3a3">multicast__add_multicast_entry</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> ipmc_index, <span class="keywordtype">int</span> *<a class="code" href="opennsl__api_8dox.html#af9d2702e21ab86e9074894ba172b114d">ports</a>, <span class="keywordtype">int</span> *cud, <span class="keywordtype">int</span> nof_mc_entries, <span class="keywordtype">int</span> is_egress) </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordtype">int</span> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">for</span> (i=0;i&lt;nof_mc_entries;i++) </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">/* egress MC */</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (is_egress) </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      rv = <a class="code" href="group__multicast.html#gae60ad27650b6302a5fc73df3af8efaa6" title="Add an encapsulated interface to a multicast group&#39;s replication list on a specific port...">opennsl_multicast_egress_add</a>(unit,ipmc_index,ports[i],cud[i]);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        printf(<span class="stringliteral">&quot;Error, opennsl_multicast_egress_add: port %d encap_id: %d \n&quot;</span>, ports[i], cud[i]);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    } </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">/* ingress MC */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      rv = <a class="code" href="group__multicast.html#gafa55f761fe7a9b6026267234c3fd7057" title="Add a port to a Ingress Multicast group&#39;s replication list.">opennsl_multicast_ingress_add</a>(unit,ipmc_index,ports[i],cud[i]);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        printf(<span class="stringliteral">&quot;Error, opennsl_multicast_ingress_add: port %d encap_id: %d \n&quot;</span>, ports[i], cud[i]);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a8636803c632aebb6238a17262d860c6e">  178</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a8636803c632aebb6238a17262d860c6e">multicast__open_egress_mc_group_with_local_ports</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> mc_group_id, <span class="keywordtype">int</span> *dest_local_port_id, <span class="keywordtype">int</span> *cud, <span class="keywordtype">int</span> num_of_ports, <span class="keywordtype">int</span> extra_flags) </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="structopennsl__cosq__gport__info__s.html" title="gport information related to getting a handle">opennsl_cosq_gport_info_t</a> gport_info;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="group__cosq.html#gace58b01f291bf94595c7c5b7fdff4f64" title="cosq gport type eumerations">opennsl_cosq_gport_type_t</a> gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7ac9aec04f4dd10ab8085c20f3b49137a0" title="Ports in Egress transmit hierarchy.">opennslCosqGportTypeLocalPort</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="example__cos_8c.html#a8b5659941298c6f209a80a5bb61b6bf7">egress_mc</a> = 1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  rv = <a class="code" href="example__cos_8c.html#ac12d4a53600681e3b6cb5e111c8f1765">multicast__open_mc_group</a>(unit, &amp;mc_group_id, extra_flags);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    printf(<span class="stringliteral">&quot;Error, multicast__open_mc_group, extra_flags $extra_flags mc_group $mc_group_id \n&quot;</span>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">for</span>(i=0;i&lt;num_of_ports;i++) </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a3cd4116433fb20351cf218dcdf360e34" title="gport to be converted.">in_gport</a>,dest_local_port_id[i]); </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    rv = <a class="code" href="group__cosq.html#ga8a8f4f366747415ac3cc3b92187c7359" title="Getting a gport handle.">opennsl_cosq_gport_handle_get</a>(unit,gport_type,&amp;gport_info);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      printf(<span class="stringliteral">&quot;Error, opennsl_cosq_gport_handle_get, gport_type $gport_type \n&quot;</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    rv = <a class="code" href="example__cos_8c.html#a2cfb797cf32205ee36458a10d85ec3a3">multicast__add_multicast_entry</a>(unit, mc_group_id, &amp;gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a2c79ed194fe6750fdd52e4f55b5b6829" title="retreived gport">out_gport</a>, &amp;cud[i], 1, <a class="code" href="example__cos_8c.html#a8b5659941298c6f209a80a5bb61b6bf7">egress_mc</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      printf(<span class="stringliteral">&quot;Error, multicast__add_multicast_entry, mc_group_id $mc_group_id dest_gport $gport_info.out_gport \n&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/* Set OFP Bandwidth (max KB per sec)</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> * Configure the Port Shaper&#39;s max rate</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a0063ad665ec8be522f1a159970039854">  219</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a0063ad665ec8be522f1a159970039854">example_set_ofp_bandwidth</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> local_port_id, <span class="keywordtype">int</span> max_kbits_sec)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="group__cosq.html#gace58b01f291bf94595c7c5b7fdff4f64" title="cosq gport type eumerations">opennsl_cosq_gport_type_t</a> gport_type;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="structopennsl__cosq__gport__info__s.html" title="gport information related to getting a handle">opennsl_cosq_gport_info_t</a> gport_info;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> out_gport;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">int</span> min_kbits_rate = 0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordtype">int</span> flags = 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">/* Set GPORT according to the given local_port_id */</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a3cd4116433fb20351cf218dcdf360e34" title="gport to be converted.">in_gport</a>, local_port_id); </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7ac9aec04f4dd10ab8085c20f3b49137a0" title="Ports in Egress transmit hierarchy.">opennslCosqGportTypeLocalPort</a>; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  rv = <a class="code" href="group__cosq.html#ga8a8f4f366747415ac3cc3b92187c7359" title="Getting a gport handle.">opennsl_cosq_gport_handle_get</a>(unit, gport_type, &amp;gport_info);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    printf(<span class="stringliteral">&quot;Error, in handle get, gport_type $gport_type \n&quot;</span>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  out_gport = gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a2c79ed194fe6750fdd52e4f55b5b6829" title="retreived gport">out_gport</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  rv = <a class="code" href="group__cosq.html#ga52ba1b9fd2823c44ffec397cd3cfae8f" title="Configure/Retrieve bandwidth setting.">opennsl_cosq_gport_bandwidth_set</a>(unit, out_gport, 0, min_kbits_rate, max_kbits_sec, flags);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    printf(<span class="stringliteral">&quot;Error, in bandwidth set, out_gport $out_gport max_kbits_sec $max_kbits_sec \n&quot;</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">/* Set Strict Priority Configuration </span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"> * queue = OPENNSL_COSQ_LOW_PRIORITY</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"> *         OPENNSL_COSQ_HIGH_PRIORITY</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"> * SP_Type = 0 for UC over MC</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"> *           1 for MC over UC</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a054b01cf2194f70d5d5165f14bf4ba1d">  259</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a054b01cf2194f70d5d5165f14bf4ba1d">example_set_sp</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> local_port_id, <span class="keywordtype">int</span> queue, <span class="keywordtype">int</span> sp_type)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="group__cosq.html#gace58b01f291bf94595c7c5b7fdff4f64" title="cosq gport type eumerations">opennsl_cosq_gport_type_t</a> gport_type;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="structopennsl__cosq__gport__info__s.html" title="gport information related to getting a handle">opennsl_cosq_gport_info_t</a> gport_info;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> out_gport;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">/* Set GPORT according to the given local_port_id */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a3cd4116433fb20351cf218dcdf360e34" title="gport to be converted.">in_gport</a>,local_port_id); </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">/* We will define MC as high or low priority */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7a6ce513fedb8b124253397577a3d33a10" title="Multicast Egress Queues - Port Hierarchy.">opennslCosqGportTypeMulticastEgress</a>; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  rv = <a class="code" href="group__cosq.html#ga8a8f4f366747415ac3cc3b92187c7359" title="Getting a gport handle.">opennsl_cosq_gport_handle_get</a>(unit,gport_type,&amp;gport_info);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    printf(<span class="stringliteral">&quot;Error, in handle get, gport_type $gport_type \n&quot;</span>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  out_gport = gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a2c79ed194fe6750fdd52e4f55b5b6829" title="retreived gport">out_gport</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span>(sp_type == 0) </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/* Setting with OPENNSL_COSQ_SP1 will set the MC to be LOWER priority --&gt; UC over MC */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    rv = <a class="code" href="group__cosq.html#gacd1f0d8fdaf8138441139ee645270a3c" title="Configure/retrieve scheduling policy.">opennsl_cosq_gport_sched_set</a>(unit, out_gport, queue, <a class="code" href="group__cosq.html#gad33b3f753f9122249cc1adc75efe65a7" title="Strict priority level.">OPENNSL_COSQ_SP1</a>, -1);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  } </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">/* Setting with OPENNSL_COSQ_SP0 will set the MC to be HIGHER priority --&gt; MC over UC */</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    rv = <a class="code" href="group__cosq.html#gacd1f0d8fdaf8138441139ee645270a3c" title="Configure/retrieve scheduling policy.">opennsl_cosq_gport_sched_set</a>(unit, out_gport, queue, <a class="code" href="group__cosq.html#ga3d93fe9e6d16edf34e962c99b67d5016" title="Strict priority level 0.">OPENNSL_COSQ_SP0</a>, -1);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    printf(<span class="stringliteral">&quot;Error, in SP set, out_gport $out_gport queue $queue sp_type  $sp_type \n&quot;</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/* Generic set weight function </span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> * queue = OPENNSL_COSQ_LOW_PRIORITY</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> *         OPENNSL_COSQ_HIGH_PRIORITY</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> * uc_mc = 0 for UC</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"> *         1 for MC </span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a88b247921dccafef6412983e5bc509f2">  306</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a88b247921dccafef6412983e5bc509f2">example_set_weight</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> local_port_id, <span class="keywordtype">int</span> queue, <span class="keywordtype">int</span> uc_mc, <span class="keywordtype">int</span> weight)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="group__cosq.html#gace58b01f291bf94595c7c5b7fdff4f64" title="cosq gport type eumerations">opennsl_cosq_gport_type_t</a> gport_type;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="structopennsl__cosq__gport__info__s.html" title="gport information related to getting a handle">opennsl_cosq_gport_info_t</a> gport_info;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> out_gport;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">/* Set GPORT according to the given local_port_id */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a3cd4116433fb20351cf218dcdf360e34" title="gport to be converted.">in_gport</a>,local_port_id); </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span>(uc_mc == 0) </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7a13aff1906b8766ce80522099c1f677bc" title="Unicast Egress Queues - Port hierarchy.">opennslCosqGportTypeUnicastEgress</a>; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  } </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7a6ce513fedb8b124253397577a3d33a10" title="Multicast Egress Queues - Port Hierarchy.">opennslCosqGportTypeMulticastEgress</a>; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  rv = <a class="code" href="group__cosq.html#ga8a8f4f366747415ac3cc3b92187c7359" title="Getting a gport handle.">opennsl_cosq_gport_handle_get</a>(unit,gport_type,&amp;gport_info);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    printf(<span class="stringliteral">&quot;Error, in handle get, gport_type $gport_type \n&quot;</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  out_gport = gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a2c79ed194fe6750fdd52e4f55b5b6829" title="retreived gport">out_gport</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">/* Set the weight of the designated queue</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">   * mode = -1 becuase we are setting weight and not strict priority</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  rv = <a class="code" href="group__cosq.html#gacd1f0d8fdaf8138441139ee645270a3c" title="Configure/retrieve scheduling policy.">opennsl_cosq_gport_sched_set</a>(unit, out_gport, queue, -1, weight);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    printf(<span class="stringliteral">&quot;Error, in weight set, out_gport $out_gport queue $queue weight $weight \n&quot;</span>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="code" href="example__cos_8c.html#acc782c78cdaa2dcfe743bb1113d29625">  348</a></span>&#160;<a class="code" href="example__cos_8c.html#acc782c78cdaa2dcfe743bb1113d29625">_opennsl_petra_egress_queue_from_cosq</a>(<span class="keywordtype">int</span> unit,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                      <span class="keywordtype">int</span> *queue_id,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                      <span class="keywordtype">int</span> cosq)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">switch</span> (cosq) </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__cosq.html#ga22d0f6cb4cd8ff714f0485f4f002e100">OPENNSL_COSQ_HIGH_PRIORITY</a>:</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        *queue_id = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__cosq.html#ga5dd7181ebf359ed4ea6d5c9d240c5fee">OPENNSL_COSQ_LOW_PRIORITY</a>:</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        *queue_id = 1;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">case</span> 6:</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">case</span> 7:</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        *queue_id = cosq;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">/* Map incoming UC TC/DP to L/H queue</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> *  incoming_tc = 0-7</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"> *  incoming_dp = 0-3</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> *  queue = OPENNSL_COSQ_LOW_PRIORITY</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> *          OPENNSL_COSQ_HIGH_PRIORITY</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a945bda4ef03fe124fb261320d9938d8b">  384</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a945bda4ef03fe124fb261320d9938d8b">example_set_uc_queue_mapping</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> local_port_id, <span class="keywordtype">int</span> incoming_tc, <span class="keywordtype">int</span> incoming_dp, <span class="keywordtype">int</span> queue)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;{</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="group__cosq.html#gace58b01f291bf94595c7c5b7fdff4f64" title="cosq gport type eumerations">opennsl_cosq_gport_type_t</a> gport_type;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="structopennsl__cosq__gport__info__s.html" title="gport information related to getting a handle">opennsl_cosq_gport_info_t</a> gport_info;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> out_gport;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordtype">int</span> queue_id;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">/* Set GPORT according to the given local_port_id */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a3cd4116433fb20351cf218dcdf360e34" title="gport to be converted.">in_gport</a>,local_port_id); </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7a13aff1906b8766ce80522099c1f677bc" title="Unicast Egress Queues - Port hierarchy.">opennslCosqGportTypeUnicastEgress</a>; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  rv = <a class="code" href="group__cosq.html#ga8a8f4f366747415ac3cc3b92187c7359" title="Getting a gport handle.">opennsl_cosq_gport_handle_get</a>(unit,gport_type,&amp;gport_info);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    printf(<span class="stringliteral">&quot;Error, in handle get, gport_type $gport_type \n&quot;</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  out_gport = gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a2c79ed194fe6750fdd52e4f55b5b6829" title="retreived gport">out_gport</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  rv = <a class="code" href="example__cos_8c.html#acc782c78cdaa2dcfe743bb1113d29625">_opennsl_petra_egress_queue_from_cosq</a>(unit,&amp;queue_id,queue);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  rv = <a class="code" href="group__cosq.html#gabbe9c18f0b9cb8782d17586b1197700d" title="Configure/retrieve {traffic class, dp} mapping to egress queue on a port.">opennsl_cosq_gport_egress_map_set</a>(unit, out_gport, incoming_tc, incoming_dp, queue_id);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    printf(<span class="stringliteral">&quot;Error, in uc queue mapping, out_gport $out_gport incoming_tc $incoming_tc incoming_dp $incoming_dp queue $queue \n&quot;</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">/*  Map incoming MC TC/DP to L/H queue</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> *  incoming_tc = 0-7</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> *  incoming_dp = 0-3</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> *  queue = OPENNSL_COSQ_LOW_PRIORITY</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"> *          OPENNSL_COSQ_HIGH_PRIORITY</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a5930d0e107ce779848804617f136652b">  423</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a5930d0e107ce779848804617f136652b">example_set_mc_queue_mapping</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> local_port_id, <span class="keywordtype">int</span> incoming_tc, <span class="keywordtype">int</span> incoming_dp, <span class="keywordtype">int</span> queue)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="group__cosq.html#gace58b01f291bf94595c7c5b7fdff4f64" title="cosq gport type eumerations">opennsl_cosq_gport_type_t</a> gport_type;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="structopennsl__cosq__gport__info__s.html" title="gport information related to getting a handle">opennsl_cosq_gport_info_t</a> gport_info;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> out_gport;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordtype">int</span> queue_id;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">/* Set GPORT according to the given local_port_id */</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a3cd4116433fb20351cf218dcdf360e34" title="gport to be converted.">in_gport</a>,local_port_id); </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  gport_type = <a class="code" href="group__cosq.html#ggad51a80545c14c96db5287252c43ea6f7ac9aec04f4dd10ab8085c20f3b49137a0" title="Ports in Egress transmit hierarchy.">opennslCosqGportTypeLocalPort</a>; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  rv = <a class="code" href="group__cosq.html#ga8a8f4f366747415ac3cc3b92187c7359" title="Getting a gport handle.">opennsl_cosq_gport_handle_get</a>(unit,gport_type,&amp;gport_info);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    printf(<span class="stringliteral">&quot;Error, in handle get, gport_type $gport_type \n&quot;</span>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  out_gport = gport_info.<a class="code" href="structopennsl__cosq__gport__info__s.html#a2c79ed194fe6750fdd52e4f55b5b6829" title="retreived gport">out_gport</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  rv = <a class="code" href="example__cos_8c.html#acc782c78cdaa2dcfe743bb1113d29625">_opennsl_petra_egress_queue_from_cosq</a>(unit,&amp;queue_id,queue);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="structopennsl__cosq__egress__multicast__config__s.html" title="multicast configuration settings">opennsl_cosq_egress_multicast_config_t</a>  multicast_egress_mapping =  { 0, queue_id,-1,-1};</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  rv = <a class="code" href="group__cosq.html#ga0fce837ca3a4fa3e86bd49d14520b4d9" title="Configure/retrieve {traffic class, dp} mapping to multicast egress configuration on a port...">opennsl_cosq_gport_egress_multicast_config_set</a>(unit, out_gport, incoming_tc, incoming_dp, </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;              <a class="code" href="group__cosq.html#ga6d6657b40ed55df72933183dbd92f6ff" title="multicast scheduled values are valid">OPENNSL_COSQ_MULTICAST_SCHEDULED</a>, </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;              &amp;multicast_egress_mapping );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    printf(<span class="stringliteral">&quot;Error, in mc queue mapping, out_gport $out_gport incoming_tc $incoming_tc incoming_dp $incoming_dp queue $queue \n&quot;</span>);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">/* Setup MAC forwading</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> * dest_type = 0 for Local Port</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"> *             1 for MC Group</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="code" href="example__cos_8c.html#af5611df878ea7dfa2f6d27c59cdb57bd">  465</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#af5611df878ea7dfa2f6d27c59cdb57bd">example_setup_mac_forwarding</a>(<span class="keywordtype">int</span> unit, <a class="code" href="group__types.html#ga016605921f5a8bd7ed96bb1b6195178a" title="opennsl_mac_t">opennsl_mac_t</a> mac, <a class="code" href="group__types.html#gaff94709d1708a51eb9aadb2e9fa03875" title="opennsl_vlan_t">opennsl_vlan_t</a> vlan, <span class="keywordtype">int</span> dest_type, <span class="keywordtype">int</span> dest_id)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> dest_gport;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="structopennsl__l2__addr__s.html" title="Device-independent L2 address structure.">opennsl_l2_addr_t</a> l2_addr;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <a class="code" href="group__l2.html#ga47e819cf5939a8e643ad09505df52071" title="Initialize an L2 address structure to a specified MAC address and VLAN ID.">opennsl_l2_addr_t_init</a>(&amp;l2_addr, mac, vlan);   </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">/* Create MC or PORT address forwarding */</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">if</span>(dest_type == 0) </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    l2_addr.<a class="code" href="structopennsl__l2__addr__s.html#a3c915015c746bbad9799b9a40a51b829" title="OPENNSL_L2_xxx flags.">flags</a> = <a class="code" href="group__l2.html#ga838d2e1cee40e3ae41cd4a59599dd333">OPENNSL_L2_STATIC</a>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="group__types.html#ga0622ec4146114faa4aab69c4e5265fa6">OPENNSL_GPORT_LOCAL_SET</a>(dest_gport, dest_id);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    l2_addr.<a class="code" href="structopennsl__l2__addr__s.html#a7546884120ba8ab5dce9348fd9bd819f" title="Zero-based port number.">port</a> = dest_gport;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  } </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    l2_addr.<a class="code" href="structopennsl__l2__addr__s.html#a3c915015c746bbad9799b9a40a51b829" title="OPENNSL_L2_xxx flags.">flags</a> = <a class="code" href="group__l2.html#ga838d2e1cee40e3ae41cd4a59599dd333">OPENNSL_L2_STATIC</a> | <a class="code" href="group__l2.html#gaff302c3bc44f98cd482238b9360c01bd">OPENNSL_L2_MCAST</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    l2_addr.<a class="code" href="structopennsl__l2__addr__s.html#a51d440393de19ef5a74d851d252f16e6" title="XGS: index in L2MC table.">l2mc_group</a> = dest_id;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  rv = <a class="code" href="group__l2.html#ga4b8920c1c3cf4c0c59bf8f0c5890f7c5" title="Add an L2 address entry to the specified device.">opennsl_l2_addr_add</a>(unit,&amp;l2_addr);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    printf(<span class="stringliteral">&quot;Error, in example_setup_mac_forwarding, dest_type $dest_type dest_id $dest_id \n&quot;</span>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">/*  Main function</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"> *  opennsl_local_port_id = The desiganted port we want to configure</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"> *  is_tm = 0 for PP Ports</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> *          1 for TM ports</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00501"></a><span class="lineno"><a class="code" href="example__cos_8c.html#aa83fdaeacee863aec4a2c37dcdf08cf4">  501</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#aa83fdaeacee863aec4a2c37dcdf08cf4">example_egress_transmit_application</a>(<span class="keywordtype">int</span> unit, <span class="keywordtype">int</span> opennsl_local_port_id, <span class="keywordtype">int</span> is_tm)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a> rv = <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordtype">int</span> tc = 0;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordtype">int</span> dp = 0;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordtype">int</span> my_modid = 0;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">/* Init */</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  printf(<span class="stringliteral">&quot;Starting Egress Transmit Application\n&quot;</span>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  rv = <a class="code" href="group__stack.html#gaa8cf2a246337c6adc0238387428dd619" title="Get or set the module ID of the local device.">opennsl_stk_modid_get</a>(unit, &amp;my_modid);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    printf(<span class="stringliteral">&quot;opennsl_stk_my_modid_get failed $rv\n&quot;</span>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">/* Create MC group */</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  printf(<span class="stringliteral">&quot;Setting up Multicast Groups.\n&quot;</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordtype">int</span> mc_group_id = 5005;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordtype">int</span> cud = 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="group__types.html#ga50bad717e3851cb2dd6acaac4d2a2f1b" title="opennsl_multicast_t">opennsl_multicast_t</a> mc_group = mc_group_id;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">/* We want to overwrite any existing group */</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="group__multicast.html#ga27adcadc98215474623759d0d7afb8d2" title="Destroy a multicast group.">opennsl_multicast_destroy</a>(unit, mc_group);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">/* Open Egress MC with the designated port as destination and 0 as cud */</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  rv = <a class="code" href="example__cos_8c.html#a8636803c632aebb6238a17262d860c6e">multicast__open_egress_mc_group_with_local_ports</a>(unit, mc_group_id, &amp;opennsl_local_port_id, &amp;cud, 1, 0);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">/* Forwarding Setup, only relevant for PP ports */</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span>(is_tm == 0) </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    printf(<span class="stringliteral">&quot;Setting up MAC Forwarding for PP Ports.\n&quot;</span>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="group__types.html#ga016605921f5a8bd7ed96bb1b6195178a" title="opennsl_mac_t">opennsl_mac_t</a> incoming_mac_uc;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="group__types.html#ga016605921f5a8bd7ed96bb1b6195178a" title="opennsl_mac_t">opennsl_mac_t</a> incoming_mac_mc;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    incoming_mac_uc[5] = 0x1;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">int</span> incoming_vlan_uc = 1;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    incoming_mac_mc[5] = 0x2;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">int</span> incoming_vlan_mc = 1;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    rv = <a class="code" href="example__cos_8c.html#af5611df878ea7dfa2f6d27c59cdb57bd">example_setup_mac_forwarding</a>(unit, incoming_mac_uc, incoming_vlan_uc, 0, opennsl_local_port_id);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    rv = <a class="code" href="example__cos_8c.html#af5611df878ea7dfa2f6d27c59cdb57bd">example_setup_mac_forwarding</a>(unit, incoming_mac_mc, incoming_vlan_mc, 1, mc_group_id);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">/* Set OFP Bandwidth to 5G */</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  printf(<span class="stringliteral">&quot;Setting Port Bandwidth.\n&quot;</span>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordtype">int</span> max_bandwidth = 5000000; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  rv = <a class="code" href="example__cos_8c.html#a0063ad665ec8be522f1a159970039854">example_set_ofp_bandwidth</a>(unit, opennsl_local_port_id, max_bandwidth);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">/* Set Weight for the Low Priority Queues */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  printf(<span class="stringliteral">&quot;Setting Weight for low priority queues.\n&quot;</span>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordtype">int</span> uc_weight =1;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">int</span> mc_weight = 2;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  rv = <a class="code" href="example__cos_8c.html#a88b247921dccafef6412983e5bc509f2">example_set_weight</a>(unit, opennsl_local_port_id, <a class="code" href="group__cosq.html#ga5dd7181ebf359ed4ea6d5c9d240c5fee">OPENNSL_COSQ_LOW_PRIORITY</a>, 0, uc_weight); </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  rv = <a class="code" href="example__cos_8c.html#a88b247921dccafef6412983e5bc509f2">example_set_weight</a>(unit, opennsl_local_port_id, <a class="code" href="group__cosq.html#ga5dd7181ebf359ed4ea6d5c9d240c5fee">OPENNSL_COSQ_LOW_PRIORITY</a>, 1, mc_weight); </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">/* Set UC over MC for the High Priority Queues */</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  printf(<span class="stringliteral">&quot;Setting Strict Priority for high priority queues.\n&quot;</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  rv = <a class="code" href="example__cos_8c.html#a054b01cf2194f70d5d5165f14bf4ba1d">example_set_sp</a>(unit,opennsl_local_port_id, <a class="code" href="group__cosq.html#ga22d0f6cb4cd8ff714f0485f4f002e100">OPENNSL_COSQ_HIGH_PRIORITY</a>, 0);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">/* Set UC Queue Mapping */</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  printf(<span class="stringliteral">&quot;Setting UC queue mapping.\n&quot;</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">for</span> (tc=0; tc &lt;= 3 ; tc++) </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  { </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">for</span>(dp = 0; dp &lt;=3; dp++ ) </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="comment">/* printf(&quot;\t TC $tc DP $dp --&gt; Low Priority.\n&quot;); */</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      rv = <a class="code" href="example__cos_8c.html#a945bda4ef03fe124fb261320d9938d8b">example_set_uc_queue_mapping</a>(unit, opennsl_local_port_id, tc, dp, <a class="code" href="group__cosq.html#ga5dd7181ebf359ed4ea6d5c9d240c5fee">OPENNSL_COSQ_LOW_PRIORITY</a>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">for</span> (tc=4; tc &lt;= 7 ; tc++) </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">for</span>(dp = 0; dp &lt;=3; dp++ ) </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">/* printf(&quot;\t TC $tc DP $dp --&gt; High Priority.\n&quot;); */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      rv = <a class="code" href="example__cos_8c.html#a945bda4ef03fe124fb261320d9938d8b">example_set_uc_queue_mapping</a>(unit, opennsl_local_port_id, tc, dp, <a class="code" href="group__cosq.html#ga22d0f6cb4cd8ff714f0485f4f002e100">OPENNSL_COSQ_HIGH_PRIORITY</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">/* Set MC Queue Mapping */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  printf(<span class="stringliteral">&quot;Setting MC queue mapping.\n&quot;</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">for</span> (tc=0; tc &lt;= 5 ; tc++) </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">for</span>(dp = 0; dp &lt;=3; dp++ ) </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="comment">/*printf(&quot;\t TC $tc DP $dp --&gt; Low Priority.\n&quot;); */</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      rv = <a class="code" href="example__cos_8c.html#a5930d0e107ce779848804617f136652b">example_set_mc_queue_mapping</a>(unit, opennsl_local_port_id, tc, dp, <a class="code" href="group__cosq.html#ga5dd7181ebf359ed4ea6d5c9d240c5fee">OPENNSL_COSQ_LOW_PRIORITY</a>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span> (tc=6; tc &lt;= 7 ; tc++) </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">for</span>(dp = 0; dp &lt;=3; dp++ ) </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="comment">/* printf(&quot;\t TC $tc DP $dp --&gt; High Priority.\n&quot;); */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      rv = <a class="code" href="example__cos_8c.html#a5930d0e107ce779848804617f136652b">example_set_mc_queue_mapping</a>(unit, opennsl_local_port_id, tc, dp, <a class="code" href="group__cosq.html#ga22d0f6cb4cd8ff714f0485f4f002e100">OPENNSL_COSQ_HIGH_PRIORITY</a>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  printf(<span class="stringliteral">&quot;Engress Transmit Application Completed Successfully.\n&quot;</span>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">/*****************************************************************/</span></div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="code" href="example__cos_8c.html#a0ddf1224851353fc92bfbff6f499fa97">  624</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="example__cos_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main function for policer application.">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordtype">int</span> rv = 0;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordtype">int</span> unit = <a class="code" href="example__cos_8c.html#adbb76aecfc5eef000cb4cb55bc2fd404">DEFAULT_UNIT</a>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordtype">int</span> choice;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordtype">int</span> outport;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">if</span>((argc != 1) || ((argc &gt; 1) &amp;&amp; (strcmp(argv[1], <span class="stringliteral">&quot;--help&quot;</span>) == 0))) </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    printf(<span class="stringliteral">&quot;%s\n\r&quot;</span>, <a class="code" href="example__cos_8c.html#afc7d01e6dbea2c820a68fb8081c58a89">example_usage</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a8b380efdb47b4a4b0ebafbb1c7823748">OPENNSL_E_PARAM</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">/* Initialize the system. */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  rv = <a class="code" href="driver_8h.html#a06a6fe41f5ea8664c461423d3cad0923" title="Function to initialize the switch.">opennsl_driver_init</a>((<a class="code" href="structopennsl__config__s.html">opennsl_init_t</a> *) <a class="code" href="sal_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">if</span>(rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to initialize the system. Error: %s\r\n&quot;</span>,</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;           <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">/* cold boot initialization commands */</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  rv = <a class="code" href="examples_2util_8h.html#a2846e8ec8f46d212a3ae2493bdff7980" title="Set default configuration (like STP state, speed/duplex) for all ports.">example_port_default_config</a>(unit);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to apply default config on ports, rc = %d (%s).\r\n&quot;</span>,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;           rv, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">/* Add ports to default vlan. */</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  printf(<span class="stringliteral">&quot;Adding ports to default vlan.\r\n&quot;</span>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  rv = <a class="code" href="examples_2util_8h.html#a2d14e4de1f4a7192ac7e378f8f7c63ff" title="Add all ports to default vlan.">example_switch_default_vlan_config</a>(unit);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">if</span>(rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    printf(<span class="stringliteral">&quot;\r\nFailed to add default ports. Error: %s\r\n&quot;</span>,</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    printf(<span class="stringliteral">&quot;\r\nUser menu: Select one of the following options\r\n&quot;</span>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    printf(<span class="stringliteral">&quot;1. Apply CoS mapping to the traffic\n&quot;</span>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">#ifdef INCLUDE_DIAG_SHELL</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;9. Launch diagnostic shell\n&quot;</span>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;0. Quit the application.\r\n&quot;</span>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="examples_2util_8h.html#ad0173c952d5a8af01c14eebabc05b5df" title="Read numeric menu choice from user.">example_read_user_choice</a>(&amp;choice) != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      printf(<span class="stringliteral">&quot;Invalid option entered. Please re-enter.\n&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">switch</span>(choice)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        printf(<span class="stringliteral">&quot;Enter the egress port number(belonging to core-0):\n&quot;</span>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="examples_2util_8h.html#ad0173c952d5a8af01c14eebabc05b5df" title="Read numeric menu choice from user.">example_read_user_choice</a>(&amp;outport) != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;          printf(<span class="stringliteral">&quot;Invalid value entered. Please re-enter.\n&quot;</span>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="comment">/* Create CoS mapping to test with traffic */</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        rv = <a class="code" href="example__cos_8c.html#aa83fdaeacee863aec4a2c37dcdf08cf4">example_egress_transmit_application</a>(0, outport, 0);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">if</span> (rv != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;          printf(<span class="stringliteral">&quot;\r\nFailed to create the CoS mapping. Error: %s\r\n&quot;</span>,</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;              <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rv));</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        }  </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="preprocessor">#ifdef INCLUDE_DIAG_SHELL</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">case</span> 9:</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        opennsl_driver_shell();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        printf(<span class="stringliteral">&quot;Exiting the application.\n&quot;</span>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        rv = <a class="code" href="driver_8h.html#aa760e8f1af45c7fd27ec014b82c572f2" title="Function to free up the resources and exit the driver.">opennsl_driver_exit</a>();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    } <span class="comment">/* End of switch */</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  } <span class="comment">/* End of while */</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/* __doxy_func_body_end__ */</span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<hr>
<p>	
<table class="footer-brcm">
	<tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align=left></td>
		<td class="footer-brcm"><small><b>&copy;  2016-17 by Broadcom Limited. All rights reserved.</b></small>
			<div class="footer-brcm"><small>Broadcom Limited reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design. 
Information furnished by Broadcom Limited is believed to be accurate and reliable. However, Broadcom Limited does not assume any liability arising 
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license 
under its patent rights nor the rights of others. </small>
			</div>
		</td>
	</tr>
</table>	
</p>	
</div>
<!--END GENERATE_TREEVIEW-->
</body>
</html>
